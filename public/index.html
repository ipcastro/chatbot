<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Musical</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="history-modal.css">
    <link rel="stylesheet" href="personality-styles.css">
    <link rel="stylesheet" href="custom-personality-modal.css">
    <link rel="stylesheet" href="login-modal.css">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>Chatbot Musical</h1>
            <p>Seu guia musical virtual</p>
            <div class="auth-status">
                <span id="auth-user-label">VocÃª nÃ£o estÃ¡ conectado.</span>
                <div class="auth-actions">
                    <button id="open-login-btn">Entrar</button>
                    <button id="open-register-btn" class="secondary">Criar conta</button>
                    <button id="logout-btn" class="hidden">Sair</button>
                </div>
            </div>
        </div>
        <div class="personality-section">
            <h2>Escolha a personalidade do chatbot:</h2>
            <div class="personality-options">
                <button class="personality-button" data-personality="professor">
                    <span>ğŸ‘¨â€ğŸ«</span> Professor de MÃºsica
                </button>
                <button class="personality-button" data-personality="dj">
                    <span>ğŸ§</span> DJ Animado
                </button>
                <button class="personality-button" data-personality="critico">
                    <span>ğŸ­</span> CrÃ­tico Musical
                </button>
                <button class="personality-button" data-personality="compositor">
                    <span>ğŸ¼</span> Compositor
                </button>
                <button class="personality-button" data-personality="historiador">
                    <span>ğŸ“š</span> Historiador Musical
                </button>
                <button class="personality-button add-custom" id="btn-add-custom">
                    <span>âœ¨</span> Criar Personalidade
                </button>
            </div>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- Mensagens serÃ£o inseridas aqui via JavaScript -->
            <div class="message bot-message">OlÃ¡! Sou o Chatbot Musical, seu guia musical virtual! ğŸµğŸ¼ Estou aqui para compartilhar meu amor pela mÃºsica com vocÃª.

Posso te ajudar com vÃ¡rios temas musicais. Se vocÃª nÃ£o souber o que perguntar, Ã© sÃ³ digitar "ajuda" e eu te mostro algumas sugestÃµes de perguntas que posso responder.

O que vocÃª gostaria de saber sobre o maravilhoso mundo da mÃºsica? VocÃª tambÃ©m pode me perguntar que horas sÃ£o ou que dia Ã© hoje!</div>
        </div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Digite sua pergunta sobre mÃºsica...">
            <button id="send-button">Enviar</button>
            <button id="history-button">ğŸ“š HistÃ³rico</button>
        </div>
    </div>
    
    <!-- Modal de HistÃ³rico -->
    <div id="history-modal-overlay" class="history-modal-overlay" style="display: none;">
        <div class="history-modal">
            <div class="history-header">
                <h2 id="history-modal-title">HistÃ³rico de Conversas</h2>
                <button id="history-close" class="history-close">Ã—</button>
            </div>
            
            <!-- Lista de sessÃµes -->
            <div id="sessions-list" class="sessions-list">
                <!-- SessÃµes serÃ£o inseridas aqui via JavaScript -->
            </div>
            
            <!-- VisualizaÃ§Ã£o detalhada da sessÃ£o -->
            <div id="session-details" class="session-details" style="display: none;">
                <!-- Detalhes da sessÃ£o serÃ£o inseridos aqui via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal para Criar Personalidade Customizada -->
    <div id="custom-personality-modal" class="custom-personality-modal">
        <div class="custom-personality-content">
            <div class="custom-personality-header">
                <h2>âœ¨ Crie Sua Personalidade</h2>
                <p>Personalize como o chatbot vai conversar com vocÃª</p>
            </div>

            <div class="custom-warning">
                ğŸ’¡ Dica: Quanto mais detalhada a descriÃ§Ã£o, melhor o bot entenderÃ¡ como agir!
            </div>

            <form id="custom-personality-form" class="custom-personality-form">
                <div class="form-group">
                    <label for="custom-name">Nome da Personalidade</label>
                    <input 
                        type="text" 
                        id="custom-name" 
                        placeholder="Ex: Consultor EstratÃ©gico, Coach Musical, etc."
                        maxlength="30"
                        required
                    >
                    <div class="character-count">
                        <span id="name-count">0</span>/30 caracteres
                    </div>
                </div>

                <div class="form-group">
                    <label for="custom-emoji">Emoji (opcional)</label>
                    <input 
                        type="text" 
                        id="custom-emoji" 
                        placeholder="Ex: ğŸ¯ ou ğŸ’¡"
                        maxlength="2"
                    >
                </div>

                <div class="form-group">
                    <label for="custom-instruction">DescriÃ§Ã£o da Personalidade</label>
                    <textarea 
                        id="custom-instruction" 
                        placeholder="Descreva como o bot deve agir. Ex: VocÃª Ã© um consultor estratÃ©gico que ajuda a encontrar o melhor caminho para objetivos musicais. Seja direto, prÃ¡tico e use exemplos reais."
                        required
                    ></textarea>
                    <div class="character-count">
                        <span id="instruction-count">0</span>/500 caracteres
                    </div>
                </div>

                <div class="custom-personality-buttons">
                    <button type="button" class="btn-cancel-custom" id="btn-cancel-custom">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-create-custom">
                        âœ¨ Criar & Usar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Login -->
    <div id="login-modal" class="login-modal">
        <div class="login-content">
            <div class="login-header">
                <h2>Entrar na sua conta</h2>
                <p>Use as mesmas credenciais que vocÃª cadastrou no sistema.</p>
            </div>
            <form id="login-form" class="login-form">
                <input type="text" id="login-username" placeholder="UsuÃ¡rio" autocomplete="username">
                <input type="password" id="login-password" placeholder="Senha" autocomplete="current-password">
                <div class="login-buttons">
                    <button type="button" class="btn-cancel" id="login-cancel-btn">Cancelar</button>
                    <button type="submit" class="btn-login">Entrar</button>
                </div>
                <div id="login-error" class="login-error"></div>
            </form>
        </div>
    </div>

    <!-- Modal de Cadastro -->
    <div id="register-modal" class="login-modal">
        <div class="login-content">
            <div class="login-header">
                <h2>Criar nova conta</h2>
                <p>Escolha um usuÃ¡rio e senha para acessar o chat.</p>
            </div>
            <form id="register-form" class="login-form">
                <input type="text" id="register-username" placeholder="Novo usuÃ¡rio" autocomplete="off">
                <input type="password" id="register-password" placeholder="Senha (mÃ­n. 6 caracteres)" autocomplete="new-password">
                <input type="password" id="register-password-confirm" placeholder="Confirmar senha" autocomplete="new-password">
                <div class="login-buttons">
                    <button type="button" class="btn-cancel" id="register-cancel-btn">Cancelar</button>
                    <button type="submit" class="btn-login">Criar conta</button>
                </div>
                <div id="register-error" class="login-error"></div>
                <div id="register-success" class="login-success"></div>
            </form>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="personalities.js"></script>
    <script src="script.js"></script>
</body>
</html>